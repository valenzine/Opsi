<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>SAM-o</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />
		<script type="text/javascript" src="src/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="src/jquery.opsi.js"></script>
		<script src="cordova.js"></script>
	</head>
	<body>
		<div class="machineContainer" id="face">
			<div>
				<div id="eyes" class="slotMachine">
					<div id="eyes-view" class="slot eyes slot1"></div>
				</div>

				<div id="noses" class="slotMachine">
					<div  id="noses-view"  class="slot noses slot1"></div>
				</div>

				<div id="mouths" class="slotMachine">
					<div id="mouths-view"  class="slot mouths slot1"></div>
				</div>
			</div>
		</div>			
		<div id="screenshot"></div>

		<script>
			$(document).ready(function(){

				var images = ["img/noses_fbf658.png","img/noses_de1e7f.png","img/noses_42b0b8.png","img/noses_45ff90.png","img/noses_93d4f0.png","img/noses_4322b7.png","img/noses_5083ed.png","img/noses_914cea.png","img/noses_f689df.png","img/noses_bc99f3.png","img/noses_fb5db4.png","img/noses_fcff8c.png","img/noses_62bfa0.png","img/noses_fdd14e.png","img/noses_e6f4c7.png","img/noses_ee8ad6.png","img/noses_ffffff.png","img/noses_ffdc8d.png","img/noses_00036d.png","img/noses_071fff.png","img/noses_cccbd0.png","img/noses_fbcb00.png","img/noses_ff0042.png","img/noses_61ebd8.png","img/noses_8adbe2.png","img/noses_ffc3b1.png","img/noses_f0c2f3.png","img/mouths_fbf658.png","img/mouths_de1e7f.png","img/mouths_42b0b8.png","img/mouths_45ff90.png","img/mouths_93d4f0.png","img/mouths_4322b7.png","img/mouths_5083ed.png","img/mouths_914cea.png","img/mouths_f689df.png","img/mouths_bc99f3.png","img/mouths_fb5db4.png","img/mouths_fcff8c.png","img/mouths_62bfa0.png","img/mouths_fdd14e.png","img/mouths_e6f4c7.png","img/mouths_ee8ad6.png","img/mouths_ffffff.png","img/mouths_ffdc8d.png","img/mouths_00036d.png","img/mouths_071fff.png","img/mouths_cccbd0.png","img/mouths_fbcb00.png","img/mouths_ff0042.png","img/mouths_61ebd8.png","img/mouths_8adbe2.png","img/mouths_ffc3b1.png","img/mouths_f0c2f3.png","img/eyes_fbf658.png","img/eyes_de1e7f.png","img/eyes_42b0b8.png","img/eyes_45ff90.png","img/eyes_93d4f0.png","img/eyes_4322b7.png","img/eyes_5083ed.png","img/eyes_914cea.png","img/eyes_f689df.png","img/eyes_bc99f3.png","img/eyes_fb5db4.png","img/eyes_fcff8c.png","img/eyes_62bfa0.png","img/eyes_fdd14e.png","img/eyes_e6f4c7.png","img/eyes_ee8ad6.png","img/eyes_ffffff.png","img/eyes_ffdc8d.png","img/eyes_00036d.png","img/eyes_071fff.png","img/eyes_cccbd0.png","img/eyes_fbcb00.png","img/eyes_ff0042.png","img/eyes_61ebd8.png","img/eyes_8adbe2.png","img/eyes_ffc3b1.png","img/eyes_f0c2f3.png"];
				
				$.preload(images);
		
				//create a new instance of shake.js.
				var myShakeEvent = new Shake({
					threshold: 15
				});

				// start listening to device motion
				myShakeEvent.start();

				// register a shake event
				window.addEventListener('shake', shakeEventDidOccur, false);

				//shake event callback
				function shakeEventDidOccur () {
					opsi();
				}
				
				var color_pairs = [
					["#DE1E7F", "fbf658"],
					["#F689DF", "de1e7f"],
					["#F0C2F3", "42b0b8"],
					["#FB5DB4", "45ff90"],
					["#F689DF", "93d4f0"],
					["#F0C2F3", "4322b7"],
					["#914CEA", "45ff90"],
					["#5083ED", "4322b7"],
					["#93D4F0", "5083ed"],
					["#FDD14E", "914cea"],
					["#E6F4C7", "f689df"],
					["#FCFF8C", "bc99f3"],
					["#42B0B8", "de1e7f"],
					["#5BE7B1", "f689df"],
					["#45FF90", "fb5db4"],
					["#4322B7", "de1e7f"],
					["#56BAF5", "fb5db4"],
					["#ACC1F6", "fcff8c"],
					["#DE1E7F", "62bfa0"],
					["#FFDC8D", "914cea"],
					["#01B9D3", "fdd14e"],
					["#62BFA0", "e6f4c7"],
					["#B7AF7A", "de1e7f"],
					["#FBF658", "914cea"],
					["#EE8AD6", "45ff90"],
					["#88587C", "ee8ad6"],
					["#61D0D8", "4322b7"],
					["#61EBD8", "914cea"],
					["#8ADBE2", "f689df"],
					["#F1F2F0", "bc99f3"],
					["#CCCBD0", "de1e7f"],
					["#FFDC8D", "62bfa0"],
					["#B7F8D8", "fb5db4"],
					["#00036D", "de1e7f"],
					["#FFC3B1", "fb5db4"],
					["#FBCB00", "4322b7"],
					["#0D0D0F", "ffffff"],
					["#64554B", "ffdc8d"],
					["#62BFA0", "00036d"],
					["#FFDC8D", "071fff"],
					["#071FFF", "cccbd0"],
					["#FF0042", "fbcb00"],
					["#0D0D0F", "cccbd0"],
					["#0D0D0F", "ee8ad6"],
					["#0D0D0F", "fbcb00"],
					["#0D0D0F", "071fff"],
					["#0D0D0F", "45ff90"],
					["#0D0D0F", "ff0042"],
					["#FFFFFF", "cccbd0"],
					["#FFFFFF", "914cea"],
					["#FFFFFF", "61ebd8"],
					["#FFFFFF", "8adbe2"],
					["#FFFFFF", "ffc3b1"],
					["#FFFFFF", "f0c2f3"]],
					pairs = [0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53],
					pair = pairs[Math.floor(pairs.length * Math.random())],
					color = color_pairs[pair],
					eyes = Math.floor((Math.random() * 55) + 1),
					nose = Math.floor((Math.random() * 45) + 1),
					mouth = Math.floor((Math.random() * 55) + 1);
					
				function randomize(){
					pair = pairs[Math.floor(pairs.length * Math.random())],
					color = color_pairs[pair],					
					eyes = Math.floor((Math.random() * 55) + 1),
					nose = Math.floor((Math.random() * 45) + 1),
					mouth = Math.floor((Math.random() * 55) + 1);
				}
				
				$("#screenshot").click(function(){
					navigator.screenshot.save(function(error,res){
						if(error){
							console.error(error);
						}else{
							console.log('ok',res.filePath);
						}
					});
					alert('Screenshot taken!');
				});
				
				function opsi() {
					randomize();
					$("body").css({backgroundColor: color[0]});			
					$("#eyes-view").removeClass().addClass('animated bounceIn eyes slot'+eyes+' c'+color[1]).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){  $(this).removeClass('bounceIn'); });
					$("#noses-view").removeClass().addClass('animated bounceIn noses slot'+nose+' c'+color[1]).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){  $(this).removeClass('bounceIn'); });
					$("#mouths-view").removeClass().addClass('animated bounceIn mouths slot'+mouth+' c'+color[1]).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){  $(this).removeClass('bounceIn'); });
				};
				
				$("#face").click(function(){
					opsi();
				});	
				opsi();
				
			});
		</script>	

	</body>
</html>